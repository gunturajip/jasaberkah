---
const { useApi = false, mobile = '', message='' } = Astro.props;

const url = useApi ? `https://api.whatsapp.com/send?phone=${mobile}&text=${encodeURIComponent(message)}` : `https://wa.me/${mobile}` ;
---


<!-- BEGIN WHATSAPP BUTTON -->
<div id="astro-whatsapp" class="astro-whatsapp hidden">
  <a href={url} target="_blank">
    <div id="wa-tooltip" class="p-2 lg:p-4 absolute left-[-175px] lg:left-[-190px] top-1/2 -translate-y-1/2 rounded-xl shadow-md bg-white text-heading-3 font-medium">
      Konsultasi sekarang
    </div>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <svg
      version="1.1"
      viewBox="0 0 47.655 47.872"
      xmlns="http://www.w3.org/2000/svg"
      aria-labelledby="svgTitle">
      <title id="svgTitle">WhatsApp Berkah Jasa</title>
      <g
        id="g1215"
        transform="matrix(0.54753794,0,0,0.54753791,12.150881,9.8615836)"
        style="stroke-width:1.82636">
        <ellipse
          style="fill:#25d366;fill-opacity:1;stroke-width:6.90277"
          id="path957"
          cx="21.325682"
          cy="25.704916"
          rx="43.517532"
          ry="43.715694" />
        <path
          d="m 21.227381,3.658116 a 21.453,21.319 0 0 0 -21.1840003,21.494 21.453,21.319 0 0 0 3.084,10.756 l -0.54297,3.3184 -1.3379,7.252 6.8965,-2.6074 2.1230003,-0.75391 a 21.453,21.319 0 0 0 11.318,3.1758 21.453,21.319 0 0 0 21.363,-21.318 l -0.0039,-0.35547 a 21.453,21.319 0 0 0 -21.717,-20.961 z"
          fill="#2ab318"
          id="path2"
          style="fill:#25d366;fill-opacity:1;stroke-width:1.82636" />
        <path
          d="m -2.5016193,49.640916 3.3661,-12.292 c -2.0763,-3.5977 -3.1685,-7.6786 -3.167,-11.86 0.00534,-13.079 10.6490004,-23.72 23.7280003,-23.72 6.3469,0.00267 12.304,2.4731 16.784,6.9568 4.4796,4.4837 6.9458,10.444 6.9435,16.783 -0.0057,13.079 -10.651,23.722 -23.728,23.722 -8e-4,0 4e-4,0 0,0 h -0.0103 c -3.9711,-0.0015 -7.8728,-0.9975 -11.338,-2.8877 z m 13.1610003,-7.5927 0.7206,0.4269 c 3.0273,1.7967 6.4983,2.7469 10.038,2.7488 h 0.0076 c 10.87,0 19.717,-8.8455 19.721,-19.717 0.002,-5.2684 -2.0473,-10.223 -5.7708,-13.949 -3.7239,-3.7266 -8.675,-5.78 -13.943,-5.7823 -10.878,0 -19.7250003,8.8443 -19.7290003,19.715 -0.00153,3.7254 1.0406,7.3532 3.0151,10.493 l 0.46921,0.7462 -1.9928,7.2753 z"
          fill="#ffffff"
          id="path4"
          style="stroke-width:2.46819" />
        <path
          d="m 15.495381,15.572916 c -0.444,-0.9873 -0.9117,-1.0071 -1.3344,-1.0243 -0.3456,-0.0148 -0.7412,-0.0141 -1.136,-0.0141 -0.3952,0 -1.0376,0.1488 -1.5808,0.742 -0.5436,0.5932 -2.0755999,2.0275 -2.0755999,4.9446 0,2.9175 2.1247999,5.7362 2.4211999,6.1322 0.2964,0.3956 4.1016,6.5731 10.128,8.9497 5.0083,1.9752 6.0272,1.5823 7.1144,1.4835 1.0872,-0.0988 3.5076,-1.4343 4.0016,-2.8187 0.4944,-1.3843 0.4944,-2.5707 0.346,-2.8191 -0.1484,-0.2468 -0.5436,-0.3952 -1.1364,-0.6916 -0.5928,-0.2964 -3.5076,-1.7311 -4.0512,-1.9287 -0.5436,-0.198 -0.9388,-0.2964 -1.334,0.2972 -0.3955,0.5928 -1.5308,1.9279 -1.8768,2.3231 -0.346,0.3964 -0.692,0.446 -1.2848,0.1492 -0.5928,-0.2972 -2.5024,-0.9228 -4.7676,-2.9427 -1.7624,-1.5713 -2.9525,-3.5122 -3.2985,-4.1057 -0.3456,-0.5929 -0.0058,-0.8858 0.2605,-1.2097 0.4795,-0.5833 1.284,-1.6319 1.4816,-2.0271 0.1976,-0.396 0.0988,-0.742 -0.0492,-1.0388 -0.1484,-0.2964 -1.3008,-3.2284 -1.8276,-4.401 z"
          clip-rule="evenodd"
          fill="#ffffff"
          fill-rule="evenodd"
          id="path6"
          style="stroke-width:2.46819" />
      </g>
    </svg>
  </a>
<style>
    .astro-whatsapp {
        position: fixed;
        width: 4rem;
        bottom: 2rem;
        right: 2rem;
        border-radius: 100%;
        z-index: 999;

        /* MD */
        @media (min-width: 768px) {
            bottom: 3rem;
            right: 3rem;
        }

        /* XL */
        @media (min-width: 1280px) {
            bottom: 6rem;
            right: 6rem;
        }
        
        .svg {
            width: 4rem;
            height: 4rem;

            /* Lg */
            @media (min-width: 1024px) {
            width: 5rem;
            height: 5rem;
            }
        }
    }

    .hidden {
        display: none;
    }
</style>
<script type="module">
  window.addEventListener('scroll', () => {
    const button = document.getElementById('astro-whatsapp');
    if (button instanceof HTMLElement) {
      if (window.scrollY > 280) {
        button.classList.remove('hidden');
      } else {
        button.classList.add('hidden');
      }
    }
  });
</script>
<!-- END WHATSAPP BUTTON -->